import whisper
import ssl
ssl._create_default_https_context = ssl._create_unverified_context


def recognize(file):
    # model = whisper.load_model("base")
    # segments = model.transcribe(file)['segments']
    # result = []
    # for segment in segments:
    #     result.append({"start": segment['start'], "text": segment['text']})


    result = [{'start': 0.0, 'text': ' Дорогие друзья, приветствую вас на канале BOOHXPERT8.'}, {'start': 8.84, 'text': ' Сегодня пробуем отыскать штатное расписание в Один из бугалтерии.'}, {'start': 13.16, 'text': ' Мы знаем, что в программе ведется кадровый учет, а штатное расписание'}, {'start': 16.96, 'text': ' обязательно и кадровый документ.'}, {'start': 19.0, 'text': ' Поэтому вопрос, где в Один из бугалтерии штатное расписание'}, {'start': 22.34, 'text': ' вполне оправдан.'}, {'start': 23.740000000000002, 'text': ' Однако в бугалтерии ограничены зарплатные и кадровый'}, {'start': 27.72, 'text': ' блок.'}, {'start': 28.72, 'text': ' Поэтому такого документа как штатное расписание,'}, {'start': 31.88, 'text': ' например, в зуб нет.'}, {'start': 33.68, 'text': ' Но есть отчет штатные сотрудники, на основе которого можно'}, {'start': 38.08, 'text': ' создать штатное расписание.'}, {'start': 39.92, 'text': ' Прежде всего, нам необходимо убедиться, что в нашей'}, {'start': 42.68, 'text': ' базе ведется кадровый учет.'}, {'start': 45.68, 'text': ' Для этого проходим в раздел зарплатой и кадры, настройки'}, {'start': 49.519999999999996, 'text': ' зарплаты.'}, {'start': 51.72, 'text': ' Общие настройки проверяем.'}, {'start': 54.12, 'text': ' Переключатель учет расчетов по заработной платии кадровый'}, {'start': 57.48, 'text': ' учет ведутся должен стоять в этой программе.'}, {'start': 61.599999999999994, 'text': ' Следующая настройка функциональность.'}, {'start': 64.28, 'text': ' Через главная функциональность мы проходим во вкладку'}, {'start': 67.8, 'text': ' сотрудники и проверяем флаг кадровые документы.'}, {'start': 73.0, 'text': ' Он должен стоять.'}, {'start': 74.32, 'text': ' Это значит, что оформление приема, перевода и увольнения'}, {'start': 78.68, 'text': ' ведется в этой базе.'}, {'start': 80.08, 'text': ' Но естественно, кадровые документы должны быть заполнены'}, {'start': 84.4, 'text': ' в базе.'}, {'start': 85.4, 'text': ' После этого можно переходить к отчету.'}, {'start': 87.96, 'text': ' Через зарплатую кадры проходим отчет и по кадрам,'}, {'start': 91.6, 'text': ' идем по ссылке штатные сотрудники и давайте сформируем'}, {'start': 95.75999999999999, 'text': ' сначала отчет со стандартными настройками.'}, {'start': 99.24, 'text': ' Перед нами отчет, не слишком он информативен, не очень'}, {'start': 102.75999999999999, 'text': ' похож на штатное расписание и содержит много лишней'}, {'start': 106.48, 'text': ' информации.'}, {'start': 107.88000000000001, 'text': ' Для того, чтобы настроить отчет в соответствии со'}, {'start': 110.84, 'text': ' штатным расписанием, понимая, какие нам нужны сведения,'}, {'start': 114.60000000000001, 'text': ' давайте сначала вспомним, как должен выглядеть этот'}, {'start': 117.76, 'text': ' документ.'}, {'start': 119.08, 'text': ' Штатное расписание, организация утверждается в'}, {'start': 122.56, 'text': ' настоящей форму.'}, {'start': 124.24000000000001, 'text': ' Однако, как правило, это делают на основе унифицированные'}, {'start': 128.12, 'text': ' формы T3.'}, {'start': 130.64000000000001, 'text': ' Мы видим, что здесь нам потребуется структурное подразделение,'}, {'start': 136.04, 'text': ' должность, количество штатных единиц, старивная ставка'}, {'start': 139.88, 'text': ' и надбавки.'}, {'start': 141.76, 'text': ' Все эти сведения можно вывести в отчете штатные сотрудники.'}, {'start': 148.2, 'text': ' Пройдем в настройки.'}, {'start': 150.6, 'text': ' Вид у нашей формы должен быть расширенный.'}, {'start': 154.95999999999998, 'text': ' Вкладка фильтры, оставляем организация, а вот группа'}, {'start': 159.51999999999998, 'text': ' и группа или это не нужная нам информация, не нужны'}, {'start': 165.24, 'text': ' нам отборы.'}, {'start': 168.56, 'text': ' Только если нам нужны сотрудники, например, которые работают'}, {'start': 172.92000000000002, 'text': ' в данный момент в организации, то есть исключая уволеных,'}, {'start': 178.12, 'text': ' мы можем оставить в группе или дату увольнения не заполнена.'}, {'start': 184.16000000000003, 'text': ' И в этом случае у нас сформируется состав сотрудников,'}, {'start': 189.48000000000002, 'text': ' которые работают на заданную дату в организации.'}, {'start': 192.6, 'text': ' Но если нам нужны ивакантные должности, с которых были уволены сотрудники,'}, {'start': 198.07999999999998, 'text': ' значит нам нужны сведения без ограничения даты увольнения.'}, {'start': 204.0, 'text': ' Обратите внимание, сейчас у нас появился сотрудник,'}, {'start': 207.35999999999999, 'text': ' который был в этом году уволен.'}, {'start': 209.35999999999999, 'text': ' Теперь настроим поля.'}, {'start': 210.88, 'text': ' Убираем организация, оставляем подразделения,'}, {'start': 213.76, 'text': ' мы помним, что нам нужны сотрудники, табельный номер.'}, {'start': 217.0, 'text': ' Если он только вам нужен, в вашем отчете, должность,'}, {'start': 221.24, 'text': ' вторивная ставка, очевидно, нужна дата приема, не нужна дату увольнения,'}, {'start': 226.44, 'text': ' оставляем для уволенных сотрудников ивакантных должностей,'}, {'start': 231.08, 'text': ' телефон рабочий и остальные сведения лишнее.'}, {'start': 235.28, 'text': ' Также мы помним, что в нашей форме штатное расписание'}, {'start': 239.20000000000002, 'text': ' есть такие сведения, как надбавки.'}, {'start': 242.28, 'text': ' Поэтому в настройках отчета штатной сотрудники нам необходимы вывести.'}, {'start': 248.16, 'text': ' Сведения о доплатах.'}, {'start': 251.07999999999998, 'text': ' Для этого в окнобке добавить мы открываем папку работа,'}, {'start': 256.88, 'text': ' далее приказа приеми, потому что эти сведения в этом приказе у нас отражены,'}, {'start': 263.6, 'text': ' далее находим на числение, открываем на именовании.'}, {'start': 268.92, 'text': ' Кроме на именовании нам нужен еще размер,'}, {'start': 271.4, 'text': ' поэтому снова проходим по кнопке добавить в работу,'}, {'start': 275.6, 'text': ' приказа приеми, на числение и размер.'}, {'start': 281.04, 'text': ' Выбрали, передвигаем, поближе, проверяем структуру, оставляем ее стандартные.'}, {'start': 292.48, 'text': ' Теперь можем закрыть и сформировать.'}, {'start': 295.12, 'text': ' Мы видим, что сформированный отчет более компактный и содержит сведения.'}, {'start': 301.08, 'text': ' Не только оба кладе, но и он отбавках.'}, {'start': 304.6, 'text': ' Еще у нас показано одна вакантная должность по уволенному недавно сотруднику.'}, {'start': 310.68, 'text': ' Сформированный отчет можно сохранить формате Excel или PDF, как вам удобно.'}, {'start': 316.48, 'text': ' Я сохраняю.'}, {'start': 318.44, 'text': ' В Excel, например, называю его штатные сотрудники.'}, {'start': 322.92, 'text': ' Вот так он выглядит.'}, {'start': 324.44, 'text': ' И на основе этого документа можно сформировать форму штатного расписания,'}, {'start': 330.28, 'text': ' либо распечатать и перенести сведения уже в готовую форму штатного расписания.'}, {'start': 335.96, 'text': ' И настройки данного отчета можно сохранить по кнопке папка, сохранить как,'}, {'start': 342.55999999999995, 'text': ' назовем для штатного расписания, проходим в разделы,'}, {'start': 348.67999999999995, 'text': ' в которых должен сохраниться этот отчет, например, это раздел кадры,'}, {'start': 354.84, 'text': ' и нажимаем на сохранить.'}, {'start': 356.8, 'text': ' Наша чет настроен, сформирован и выгружен в Excel.'}, {'start': 360.72, 'text': ' А вы, друзья, как формируете ваши штатные расписания?'}, {'start': 364.6, 'text': ' Еще вариант настройка есть в нашей статье штатное расписание в один из бугалтерия.'}, {'start': 370.08000000000004, 'text': ' Если видео оказалось полезным, подписывайтесь на наш канал.'}, {'start': 373.8, 'text': ' У нас много всего нужного.'}, {'start': 375.76, 'text': ' Нажимайте на колокольчик и с размещением нового видео вам придет уведомления.'}, {'start': 381.08000000000004, 'text': ' А у меня все. До новых встреч.'}]

    for i in range(len(result)):
        counter = 1
        while result[i]["text"][-1] != ".":
            result[i]["text"] += result[i + counter]["text"]
            result[i + counter]["text"] = "."
            counter += 1

    for i in result:
        if i["text"] == '.':
            result.remove(i)

    result = [{'start': round(i['start']), 'text': i['text'][1::] if i['text'][0] == " " else i['text']} for i in result]
    result = [d for d in result if d['text'] != "."]

    result = [{'start': f"{int(elem['start']/60)}:{elem['start']%60 if elem['start']%60 > 9 else '0' + str(elem['start']%60)}", 'text': elem['text']} for elem in result]
    return result
